<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>FrancoGame - Comandi console (Beta Tester)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="dark light">

  <script>
    (function() {
      const storageKey = 'francogame-theme';
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      let saved = null;

      try { saved = localStorage.getItem(storageKey); } catch (_) {}

      const mode = saved === 'light' || saved === 'dark' ? saved : 'system';
      const resolved = mode === 'dark' ? 'dark' : mode === 'light' ? 'light' : (prefersDark ? 'dark' : 'light');
      document.documentElement.classList.add(resolved === 'dark' ? 'theme-dark' : 'theme-light');
    })();
  </script>

  <link rel="stylesheet" href="../assets/style.css">
  <style>
    .tooltip-term { position: relative; cursor: help; border-bottom: 1px dashed var(--border-subtle); }
    .tooltip-enabled .tooltip-term::after {
      content: attr(data-tooltip);
      position: absolute;
      left: 0;
      top: calc(100% + 0.4rem);
      background: var(--bg-elevated);
      color: var(--text-main);
      border: 1px solid var(--border-subtle);
      padding: 0.45rem 0.55rem;
      border-radius: 10px;
      box-shadow: var(--shadow-elevated);
      max-width: 18rem;
      width: max-content;
      white-space: normal;
      opacity: 0;
      transform: translateY(-2px);
      transition: opacity 0.15s ease, transform 0.15s ease;
      pointer-events: none;
      z-index: 30;
    }
    .tooltip-enabled .tooltip-term:hover::after,
    .tooltip-enabled .tooltip-term:focus-visible::after {
      opacity: 1;
      transform: translateY(0);
    }
    .version-box {
      margin: 0.75rem 0 0.4rem;
      padding: 0.7rem 0.85rem;
      background: var(--bg-elevated);
      border: 1px solid var(--border-subtle);
      border-radius: 0.85rem;
      box-shadow: var(--shadow-elevated);
      line-height: 1.3;
    }
    .version-label {
      display: flex;
      align-items: center;
      gap: 0.35rem;
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-soft);
      font-weight: 700;
    }
    .version-dot {
      width: 0.55rem;
      height: 0.55rem;
      border-radius: 50%;
      background: var(--accent, #7f8cff);
      box-shadow: 0 0 0 4px rgba(127, 140, 255, 0.15);
    }
    .version-value {
      margin-top: 0.25rem;
      font-size: 1.05rem;
      font-weight: 700;
      color: var(--text-main);
    }
    .version-source {
      margin-top: 0.15rem;
      color: var(--text-muted);
      font-size: 0.83rem;
    }
    .version-error {
      color: var(--danger, #d86);
      font-weight: 600;
    }
  </style>

</head>
<body>

  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="logo-circle">FG</div>
      <div class="sidebar-title-block">
        <div class="sidebar-title">FrancoGame</div>
        <div class="sidebar-subtitle">Comandi console | Beta testing</div>
      </div>
      <div style="margin-left:auto; display:flex; align-items:center; gap:0.5rem;">
        <label for="themeSelect" style="font-size:0.75rem; color:var(--text-soft);">Tema</label>
        <select id="themeSelect" aria-label="Seleziona tema" style="background:var(--bg-elevated); color:var(--text-main); border:1px solid var(--border-subtle); padding:0.22rem 0.4rem; border-radius:6px;">
          <option value="system">Sistema</option>
          <option value="light">Chiaro</option>
          <option value="dark">Scuro</option>
        </select>
      </div>
    </div>

    <div class="badge-engine">Unreal Engine 5.5.4</div>

    <div class="version-box" aria-live="polite">
      <div class="version-label">
        <span class="version-dot" aria-hidden="true"></span>
        Ultima build
      </div>
      <div class="version-value" id="buildVersionValue">Caricamento...</div>
      <div class="version-source">Sincronizzata da FrancoGame/Config/DefaultEngine.ini</div>
    </div>

    <div class="sidebar-note">
      Usa questa pagina come riferimento durante il testing.<br>
      <strong>I comandi vanno digitati nella console in gioco</strong> e confermati con Invio.
    </div>

    <div style="margin:0.75rem 0 1rem; padding:0.75rem; background:var(--bg-elevated); border:1px solid var(--border-subtle); border-radius:0.9rem; display:flex; gap:0.6rem; align-items:flex-start;">
      <input id="tooltipToggle" type="checkbox" checked aria-label="Attiva spiegazioni termini tecnici" style="margin-top:0.25rem; accent-color:var(--accent, #7f8cff);">
      <div>
        <label for="tooltipToggle" style="display:block; font-weight:600; color:var(--text-main);">Spiegazioni termini tecnici</label>
        <p style="margin:0.2rem 0 0; color:var(--text-soft); font-size:0.9rem; line-height:1.4;">
          Quando attivo, passa col mouse sui termini evidenziati per vedere una descrizione semplice.
        </p>
      </div>
    </div>

    <div>
      <p class="nav-section-title">Sezioni</p>
      <ul class="nav-list">
        <li><a href="#intro"><span class="nav-bullet"></span><span class="section-index">1.</span> Introduzione</a></li>
        <li><a href="#base"><span class="nav-bullet"></span><span class="section-index">2.</span> Comandi base</a></li>
        <li><a href="#perf"><span class="nav-bullet"></span><span class="section-index">3.</span> Statistiche di performance</a></li>
        <li><a href="#gfx"><span class="nav-bullet"></span><span class="section-index">4.</span> Grafica &amp; performance</a></li>
        <li><a href="#comfort"><span class="nav-bullet"></span><span class="section-index">5.</span> Comfort visivo</a></li>
        <li><a href="#debug"><span class="nav-bullet"></span><span class="section-index">6.</span> Debug leggero</a></li>
        <li><a href="#bug"><span class="nav-bullet"></span><span class="section-index">7.</span> Comandi per bug</a></li>
        <li><a href="#report"><span class="nav-bullet"></span><span class="section-index">8.</span> Come riportare un bug</a></li>
      </ul>
    </div>

    <div class="nav-footer">
      Guida pensata per build interne di test.
      <small>Non condividere all'esterno senza autorizzazione.</small>
      <div class="nav-footer-code">
        <span class="nav-footer-dot"></span>
        <span>Console: tasto sotto <strong>Esc</strong></span>
      </div>
    </div>
  </aside>

  <main class="content">
    <div class="content-inner">

      <header class="page-header">
        <h1 class="page-title">Comandi console per beta tester</h1>
        <p class="page-subtitle">
          Riferimento rapido per modificare grafica, performance e debug nelle build di FrancoGame.
        </p>
        <div class="tag-row">
          <div class="tag-pill"><strong>Target</strong> - Beta tester</div>
          <div class="tag-pill"><strong>Piattaforma</strong> - Build interne UE 5.5.4</div>
          <div class="tag-pill"><strong>Uso</strong> - Solo in ambienti non di produzione</div>
        </div>
      </header>

      <!-- 1. Introduzione -->
      <section id="intro">
        <h2>
          1. Introduzione
          <span class="section-label">Come usare questa pagina</span>
        </h2>
        <p>
          In questa build il gioco non ha ancora un menu opzioni completo. Per modificare grafica, performance e alcune impostazioni di debug
          si usa la <strong>console di gioco</strong>.
        </p>
        <ul class="compact">
          <li>La console si apre di solito con il tasto <code>~</code> (tilde) o il tasto sotto <code>Esc</code>.</li>
          <li>Su alcune tastiere potrebbe essere mappata su un tasto diverso: se non succede nulla, avvisa lo sviluppatore.</li>
        </ul>
        <h3>Scaricare e avviare la build</h3>
        <ol style="margin:0.35rem 0 0.6rem 1.1rem; padding:0; color:var(--text-muted); font-size:0.9rem; line-height:1.5;">
          <li>Apri la pagina <strong>Releases</strong> su GitHub e scegli l’ultima build (es. <em>DevelopmentBuild</em>).</li>
          <li>Scarica tutte le parti dello zip (es. <code>Build.zip.001</code>, <code>Build.zip.002</code>, …) e mettile nella stessa cartella.</li>
          <li>Estrai usando 7-Zip partendo dal file <code>.zip.001</code> (click destro → 7-Zip → <em>Estrai qui</em>); le altre parti verranno lette automaticamente.</li>
          <li>Avvia il gioco da <code>FrancoGame.exe</code> in <code>FrancoGame/Binaries/Win64</code> (o percorso equivalente).</li>
        </ol>
        <div class="callout">
          <div class="callout-label">Tip</div>
          <div>Se l’estrazione fallisce, verifica che tutte le parti dello zip siano nella stessa cartella e che nessun file sia corrotto.</div>
        </div>
        <div style="margin:0.6rem 0 0.8rem;">
          <img src="../assets/img/Screenshot_30-11-2025_194225_github.com.jpeg" alt="Esempio di pagina Releases su GitHub" style="width:100%; border-radius:0.9rem; border:1px solid var(--border-subtle); box-shadow: var(--shadow-elevated); display:block;">
        </div>
        <div class="callout">
          <div class="callout-label">Nota</div>
          <div>
            Tutti i comandi elencati in questa pagina vanno digitati nella console e confermati con <strong>Invio</strong>.
          </div>
        </div>
      </section>

      <!-- 2. Comandi base -->
      <section id="base" class="alt">
        <h2>2. Comandi base <span class="section-label">Controllo del gioco</span></h2>

        <h3>2.1 Controllo generale del gioco</h3>

        <div class="cmd-group">
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span>quit</span></div>
            <div class="cmd-desc">
              Chiude immediatamente il gioco.
              <div class="cmd-tag-row">
                <span class="cmd-tag">Uscita</span>
                <span class="cmd-tag">Globale</span>
              </div>
            </div>
          </div>

          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span>restartlevel</span></div>
            <div class="cmd-desc">
              Ricarica il livello corrente da capo.
              <div class="cmd-tag-row">
                <span class="cmd-tag">Reset rapido</span>
                <span class="cmd-tag">Debug</span>
              </div>
            </div>
          </div>

          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span>open NomeMappa</span></div>
            <div class="cmd-desc">
              Carica una mappa specifica, se abilitato nella build. Esempi:
              <br><code>open MainMenu</code>, <code>open Level01</code>
              <div class="cmd-tag-row">
                <span class="cmd-tag">Salto mappa</span>
                <span class="cmd-tag">Solo se consentito</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 3. Statistiche di performance -->
      <section id="perf">
        <h2>3. Statistiche di performance <span class="section-label">FPS, tempi &amp; memoria</span></h2>

        <p>
          Usa questi comandi quando ti viene chiesto di riportare cali di frame, lag o problemi di performance.
        </p>

        <div class="cmd-group">
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Mostra i frame al secondo in tempo reale.">stat fps</span></div>
            <div class="cmd-desc">
              Mostra gli FPS (frame al secondo) in tempo reale.
            </div>
          </div>

          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Divide il tempo di ogni frame tra logica di gioco, render CPU e GPU.">stat unit</span></div>
            <div class="cmd-desc">
              Mostra i tempi principali:
              <ul class="compact">
                <li><strong>Game</strong> - logica di gioco</li>
                <li><strong>Draw</strong> - render CPU</li>
                <li><strong>GPU</strong> - scheda video</li>
                <li><strong>RHIT</strong> - render thread</li>
              </ul>
            </div>
          </div>

          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Come stat unit ma con grafico temporale per vedere i picchi.">stat unitgraph</span></div>
            <div class="cmd-desc">
              Come <code>stat unit</code>, ma con un grafico temporale che mostra l'andamento nel tempo.
            </div>
          </div>

          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Mostra quanta RAM usa il gioco.">stat memory</span></div>
            <div class="cmd-desc">
              Mostra l'uso di memoria (utile su macchine con poca RAM o grossi caricamenti).
            </div>
          </div>
        </div>

        <div class="callout success">
          <div class="callout-label">Suggerimento</div>
          <div>
            Per segnalare un bug di performance abilita almeno <code>stat fps</code> e <code>stat unit</code> e allega uno screenshot.
          </div>
        </div>
      </section>

      <!-- 4. Grafica & performance -->
      <section id="gfx" class="alt">
        <h2>4. Impostazioni di grafica e performance <span class="section-label">Preset &amp; regolazioni</span></h2>

        <div class="callout">
          <div class="callout-label">Regola generale</div>
          <div>
            Se il gioco scatta o va lento, prova prima i preset <strong>Bassa</strong> o <strong>Media</strong>.<br>
            Se il gioco è fluido e vuoi più qualità, prova <strong>Alta</strong>.
          </div>
        </div>

        <h3>4.1 Limite di FPS</h3>
        <div class="cmd-group">
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Nessun limite: usa tutta la potenza disponibile, FPS variabili.">t.MaxFPS 0</span></div>
            <div class="cmd-desc">
              Nessun limite di FPS.
            </div>
          </div>
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Blocca gli FPS a 60: riduce carico/temperature e rende il frame rate piu stabile.">t.MaxFPS 60</span></div>
            <div class="cmd-desc">
              Limita il gioco a 60 FPS (puoi usare anche 30, 120, 144, ecc.).
              <div class="cmd-tag-row">
                <span class="cmd-tag">Stabilità</span>
                <span class="cmd-tag">Riduzione carico</span>
              </div>
            </div>
          </div>
        </div>

        <p>Consigliato quando:</p>
        <ul class="compact">
          <li>il PC scalda troppo</li>
          <li>la <span class="tooltip-term" data-tooltip="La scheda video: gestisce il rendering del gioco.">GPU</span> è costantemente al 100%</li>
          <li>preferisci un frame rate più stabile</li>
        </ul>

        <h3>4.2 VSync (sincronizzazione verticale)</h3>

        <div class="cmd-group">
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Sincronizza i frame con il refresh del monitor: meno tearing, possibili FPS piu bassi.">r.VSync 1</span></div>
            <div class="cmd-desc">
              VSync attivo: riduce il tearing verticale, può causare piccoli cali di FPS.
            </div>
          </div>
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Disattiva la sincronizzazione: massimi FPS ma il tearing puo essere visibile.">r.VSync 0</span></div>
            <div class="cmd-desc">
              VSync disattivo: più FPS possibili, ma può comparire tearing.
            </div>
          </div>
        </div>

        <h3>4.3 Risoluzione interna (Screen Percentage)</h3>

        <div class="cmd-group">
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Renderizza alla risoluzione piena: massima nitidezza, piu carico per la GPU.">r.ScreenPercentage 100</span></div>
            <div class="cmd-desc">Qualità normale (100% della risoluzione).</div>
          </div>
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Renderizza all'80% della risoluzione: alleggerisce la GPU con perdita visiva limitata.">r.ScreenPercentage 80</span></div>
            <div class="cmd-desc">Leggero boost di performance con perdita minima di qualità.</div>
          </div>
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Renderizza al 70%: immagine piu morbida ma performance sensibilmente migliori.">r.ScreenPercentage 70</span></div>
            <div class="cmd-desc">Qualità ridotta, utile su PC più deboli.</div>
          </div>
        </div>

        <p><strong>Suggerimento:</strong></p>
        <pre><code>r.ScreenPercentage 80</code></pre>
        <p>
          Se il gioco è ancora troppo pesante, scendi a <code>70</code>.
        </p>

        <h3>4.4 Preset grafici consigliati</h3>
        <p>
          I seguenti comandi regolano i "gruppi di qualità" dell'engine. Valori validi:
          <code>0</code> (molto basso) → <code>4</code> (molto alto / cinematico).
        </p>
        <ul class="compact">
          <li><code>sg.ViewDistance X</code> - distanza di visualizzazione oggetti</li>
          <li><code>sg.ShadowQuality X</code> - qualità ombre</li>
          <li><code>sg.PostProcessQuality X</code> - effetti post-process (bloom, DOF, ecc.)</li>
          <li><code>sg.TextureQuality X</code> - qualità texture</li>
          <li><code>sg.EffectsQuality X</code> - particelle / effetti</li>
          <li><code>sg.FoliageQuality X</code> - vegetazione</li>
          <li><code>sg.ReflectionQuality X</code> - riflessi</li>
          <li>(se presente) <code>sg.GlobalIlluminationQuality X</code> - illuminazione globale</li>
        </ul>

        <h3>4.4.1 Preset "Bassa qualità" (PC deboli)</h3>
        <pre><code>sg.ViewDistance 1
sg.ShadowQuality 1
sg.PostProcessQuality 1
sg.TextureQuality 1
sg.EffectsQuality 1
sg.FoliageQuality 0
sg.ReflectionQuality 1
r.ScreenPercentage 80</code></pre>

        <h3>4.4.2 Preset "Media qualità" (equilibrato)</h3>
        <pre><code>sg.ViewDistance 2
sg.ShadowQuality 2
sg.PostProcessQuality 2
sg.TextureQuality 3
sg.EffectsQuality 2
sg.FoliageQuality 2
sg.ReflectionQuality 2
r.ScreenPercentage 100</code></pre>

        <h3>4.4.3 Preset "Alta qualità" (PC buoni)</h3>
        <pre><code>sg.ViewDistance 3
sg.ShadowQuality 3
sg.PostProcessQuality 3
sg.TextureQuality 4
sg.EffectsQuality 3
sg.FoliageQuality 3
sg.ReflectionQuality 3
r.ScreenPercentage 100</code></pre>

        <div class="callout danger">
          <div class="callout-label">Attenzione</div>
          <div>
            Se con il preset "Alta qualità" il gioco subisce cali di performance, torna a <strong>Media qualità</strong>.
          </div>
        </div>
      </section>

      <!-- 5. Comfort visivo -->
      <section id="comfort">
        <h2>5. Comfort visivo <span class="section-label">FOV &amp; motion blur</span></h2>

        <h3>5.1 Campo visivo (FOV)</h3>

        <p>Valori comuni:</p>
        <ul class="compact">
          <li><code>fov 80</code> - per schermi più piccoli o giocatori sensibili al motion sickness</li>
          <li><code>fov 90</code> - valore intermedio consigliato</li>
          <li><code>fov 100</code> - per chi preferisce un campo visivo più ampio</li>
        </ul>

        <p>
          Se ti gira la testa o ti senti "stretto" sullo schermo, prova <code>fov 90</code>.
        </p>

        <h3>5.2 Motion blur</h3>
        <p>
          L'uso del motion blur dipende da come è stata configurata la build. Se supportato, alcuni comandi tipici sono:
        </p>

        <div class="cmd-group">
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Disattiva il motion blur per un'immagine piu nitida.">r.MotionBlurQuality 0</span></div>
            <div class="cmd-desc">Disattiva il motion blur.</div>
          </div>
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Applica un livello medio di motion blur, utile per smussare i movimenti.">r.MotionBlurQuality 2</span></div>
            <div class="cmd-desc">Imposta un livello medio di motion blur.</div>
          </div>
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Setta a zero l'intensita del blur: immagine stabile.">r.MotionBlur.Amount 0.0</span></div>
            <div class="cmd-desc">Nessun blur (se supportato).</div>
          </div>
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Quantita moderata di blur: addolcisce i movimenti ma riduce la nitidezza.">r.MotionBlur.Amount 0.5</span></div>
            <div class="cmd-desc">Blur moderato.</div>
          </div>
        </div>

        <p><strong>Per ridurre il fastidio visivo:</strong></p>
        <pre><code>r.MotionBlurQuality 0
r.MotionBlur.Amount 0.0</code></pre>
        <p>(solo se la build supporta questi comandi)</p>
      </section>

      <!-- 6. Debug leggero -->
      <section id="debug" class="alt">
        <h2>6. Comandi di debug "leggeri" per QA <span class="section-label">Senza rompere il bilanciamento</span></h2>

        <p>
          Questi comandi aiutano il testing senza stravolgere il gioco. Se non funzionano, potrebbero essere stati disattivati.
        </p>

        <h3>6.1 Collisioni e navigazione</h3>
        <div class="cmd-group">
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span>show Collision</span></div>
            <div class="cmd-desc">Mostra le collisioni delle mesh.</div>
          </div>
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Evidenzia il navmesh: le aree dove l'IA puo muoversi.">show Navigation</span></div>
            <div class="cmd-desc">Mostra il navmesh (zone in cui l'IA può muoversi).</div>
          </div>
        </div>

        <h3>6.2 Camera e debug visuale</h3>
        <div class="cmd-group">
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span>toggledebugcamera</span></div>
            <div class="cmd-desc">Attiva una camera libera di debug, potenzialmente con info aggiuntive.</div>
          </div>
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Disattiva tutti gli effetti di post-process per vedere l'immagine grezza.">showflag.PostProcessing 0</span></div>
            <div class="cmd-desc">Disattiva il post-process (utile per vedere il gioco "pulito").</div>
          </div>
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Riattiva gli effetti di post-process (bloom, DOF, ecc.).">showflag.PostProcessing 1</span></div>
            <div class="cmd-desc">Riattiva il post-process.</div>
          </div>
        </div>

        <h3>6.3 Debug della rete (se il gioco è multiplayer)</h3>
        <div class="cmd-group">
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Pannello rete: mostra ping, perdita pacchetti e banda.">stat net</span></div>
            <div class="cmd-desc">Mostra ping, packet loss, bandwidth e altre informazioni di rete.</div>
          </div>
        </div>

        <p><strong>Comandi avanzati</strong> (usali solo se richiesto espressamente):</p>
        <div class="cmd-group">
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span>net pktlag=XX</span></div>
            <div class="cmd-desc">Simula lag in millisecondi, es. <code>net pktlag=150</code>.</div>
          </div>
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span>net pktloss=XX</span></div>
            <div class="cmd-desc">Simula perdita di pacchetti in %, es. <code>net pktloss=5</code>.</div>
          </div>
        </div>
      </section>

      <!-- 7. Comandi per bug -->
      <section id="bug">
        <h2>7. Comandi per segnare e riprodurre bug <span class="section-label">Posizioni &amp; screenshot</span></h2>

        <p>
          Se il progetto li supporta, questi comandi sono molto utili per riprodurre bug in modo preciso.
        </p>

        <div class="cmd-group">
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Comando UE per salvare screenshot e coordinate in un colpo solo.">BugIt</span></div>
            <div class="cmd-desc">
              Salva uno screenshot e la posizione del giocatore nei log. Utile per lo sviluppatore per saltare direttamente al punto del bug.
            </div>
          </div>
          <div class="cmd-row">
            <div class="cmd-name"><span class="dot"></span><span class="tooltip-term" data-tooltip="Teletrasporta il giocatore su coordinate salvate da BugIt (posizione + rotazione).">BugItGo X Y Z Yaw Pitch Roll</span></div>
            <div class="cmd-desc">
              Teletrasporta il giocatore a una posizione precisa salvata in precedenza.
            </div>
          </div>
        </div>
      </section>

      <!-- 8. Come riportare un bug -->
      <section id="report" class="alt">
        <h2>8. Come riportare un bug usando questi comandi <span class="section-label">Checklist per le segnalazioni</span></h2>

        <p>
          Quando segnali un problema, cerca di includere più informazioni possibili. Una buona segnalazione dovrebbe contenere:
        </p>

        <ol style="margin:0.4rem 0 0.6rem 1.1rem; padding:0; color:var(--text-muted); font-size:0.9rem; line-height:1.5;">
          <li>
            <strong>Descrizione breve del problema</strong><br>
            Esempio: "Il gioco cala a 25 FPS quando entro nella stanza grande del castello".
          </li>
          <li>
            <strong>Preset usato</strong><br>
            Bassa / Media / Alta oppure i comandi principali che hai impostato (<code>r.ScreenPercentage</code>, <code>sg.*</code>, ecc.).
          </li>
          <li>
            <strong>Comandi attivi al momento del bug</strong><br>
            Per esempio:
            <ul class="compact">
              <li><code>stat fps</code></li>
              <li><code>stat unit</code></li>
              <li>altri eventualmente richiesti (es. <code>stat memory</code>, <code>stat net</code>)</li>
            </ul>
          </li>
          <li>
            <strong>Screenshot o video</strong><br>
            Se possibile, includi un'immagine o un clip con i numeri a schermo (<code>stat fps</code>, <code>stat unit</code>).
          </li>
          <li>
            <strong>Passi per riprodurre</strong><br>
            Esempio: "Carico la mappa X → vado verso la porta a sinistra → entro nella stanza → giro la camera verso il centro".
          </li>
        </ol>

        <h3>8.1 Dove caricare l'issue</h3>
        <p>Carica sempre la segnalazione nella <a href="https://github.com/Papin-Network/FrancoGame" title="FrancoGame - GitHub">repository GitHub del gioco</a>, sezione <strong>Issues</strong>.</p>
        <p>Procedi cosi (non c'e' un template dedicato):</p>
        <ol style="margin:0.35rem 0 0.6rem 1.1rem; padding:0; color:var(--text-muted); font-size:0.9rem; line-height:1.5;">
          <li>Apri la repository su GitHub e vai su <a href="https://github.com/Papin-Network/FrancoGame/issues">Issues</a> -> <em>New issue</em>.</li>
          <li>Nel <strong>titolo</strong> specifica area del gioco + problema (es. "[Cattedrale] FPS bassi nell'ingresso").</li>
          <li>Nel <strong>corpo</strong> incolla i punti della checklist sopra (preset, comandi attivi, passi per riprodurre).</li>
          <li>Aggiungi <strong>screenshot/video</strong> e, se richiesto, allega <strong>log</strong> o file generati da <code>BugIt</code> (zippali se pesanti).</li>
          <li>Imposta le etichette: in <strong>Labels</strong> scegli <code>bug</code> e in <strong>Type</strong> scegli <code>Bug</code> (come nel pannello a destra su GitHub).</li>
          <li>Per bug diversi apri <strong>issue separate</strong> cosi il triage rimane chiaro.</li>
        </ol>
        <div style="margin:0.6rem 0 0.8rem;">
          <img src="../assets/img/Screenshot_30-11-2025_222521_github.com.jpeg" alt="Esempio di issue con etichette bug e type Bug" style="width:100%; border-radius:0.9rem; border:1px solid var(--border-subtle); box-shadow: var(--shadow-elevated); display:block;">
        </div>
        <p>Se non vedi la tab <em>Issues</em> o non hai accesso, avvisa subito uno sviluppatore per farti abilitare.</p>

        <div class="callout">
          <div class="callout-label">Nota</div>
          <div>
            Questo documento copre i comandi console principali pensati per i beta tester.<br>
            Comandi extra o specifici del progetto possono essere aggiunti in una sezione dedicata (teletrasporti interni, feature sperimentali, salti rapidi a livelli o cutscene).
          </div>
        </div>
      </section>

    </div>
  </main>

  <script>
    (function() {
      const select = document.getElementById('themeSelect');
      const storageKey = 'francogame-theme';
      const prefersDarkMQ = window.matchMedia('(prefers-color-scheme: dark)');
      const colorSchemeMeta = document.querySelector('meta[name="color-scheme"]');
      const tooltipToggle = document.getElementById('tooltipToggle');
      const tooltipKey = 'francogame-tooltips';
      const versionValue = document.getElementById('buildVersionValue');

      const safeGet = () => {
        try { return localStorage.getItem(storageKey) || 'system'; } catch (_) { return 'system'; }
      };

      const safeSet = (val) => {
        try { localStorage.setItem(storageKey, val); } catch (_) {}
      };

      function applyTheme(mode) {
        const resolved = mode === 'dark'
          ? 'dark'
          : mode === 'light'
            ? 'light'
            : (prefersDarkMQ.matches ? 'dark' : 'light');

        document.documentElement.classList.toggle('theme-dark', resolved === 'dark');
        document.documentElement.classList.toggle('theme-light', resolved === 'light');
        colorSchemeMeta?.setAttribute('content', resolved === 'dark' ? 'dark light' : 'light dark');
      }

      function safeGetTooltip() {
        try { return localStorage.getItem(tooltipKey); } catch (_) { return null; }
      }

      function safeSetTooltip(val) {
        try { localStorage.setItem(tooltipKey, val); } catch (_) {}
      }

      function applyTooltip(enabled) {
        document.documentElement.classList.toggle('tooltip-enabled', enabled);
      }

      async function tryGetVersion(url, type) {
        const response = await fetch(url, { cache: 'no-cache' });
        if (!response.ok) return null;

        if (type === 'json') {
          const data = await response.json();
          const candidate = data?.version || data?.Version || data?.VERSION;
          return typeof candidate === 'string' ? candidate.trim() : candidate?.toString()?.trim();
        }

        const content = await response.text();
        const match = content.match(/^\s*Version\s*=\s*([^\r\n#;]+)/mi);
        return match && match[1] ? match[1].trim() : null;
      }

      const saved = safeGet();
      select.value = saved;
      applyTheme(saved);

      select.addEventListener('change', function() {
        const val = select.value;
        safeSet(val);
        applyTheme(val);
      });

      const savedTooltip = safeGetTooltip();
      const tooltipEnabled = savedTooltip === null ? true : savedTooltip === 'on';
      applyTooltip(tooltipEnabled);

      if (tooltipToggle) {
        tooltipToggle.checked = tooltipEnabled;
        tooltipToggle.addEventListener('change', function() {
          const enabled = tooltipToggle.checked;
          safeSetTooltip(enabled ? 'on' : 'off');
          applyTooltip(enabled);
        });
      }

      prefersDarkMQ.addEventListener('change', () => {
        if (safeGet() === 'system') {
          applyTheme('system');
        }
      });

      async function loadBuildVersion() {
        if (!versionValue) return;
        const targets = [
          { url: '../assets/version.json', type: 'json' },
          { url: 'assets/version.json', type: 'json' },
          { url: './assets/version.json', type: 'json' },
          { url: '../Config/DefaultEngine.ini', type: 'ini' },
          { url: 'Config/DefaultEngine.ini', type: 'ini' },
          { url: './Config/DefaultEngine.ini', type: 'ini' },
          { url: 'https://raw.githubusercontent.com/Papin-Network/FrancoGame-Docs/main/assets/version.json', type: 'json' },
          { url: 'https://raw.githubusercontent.com/Papin-Network/FrancoGame-Docs/main/Config/DefaultEngine.ini', type: 'ini' },
          { url: 'https://raw.githubusercontent.com/Papin-Network/FrancoGame/main/Config/DefaultEngine.ini', type: 'ini' }
        ];

        for (const target of targets) {
          try {
            const version = await tryGetVersion(target.url, target.type);
            if (version) {
              versionValue.textContent = version;
              return;
            }
          } catch (_) {
            // Ignore and try next target
          }
        }

        versionValue.textContent = 'N/D';
        versionValue.classList.add('version-error');
      }

      loadBuildVersion();
    })();
  </script>

</body>
</html>

